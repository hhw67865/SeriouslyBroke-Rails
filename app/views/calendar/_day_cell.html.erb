<% entries = entries_for_date(day[:date]) %>
<% expense = entries.select { |e| e.category.expense? }.sum(&:amount) %>
<% income = entries.select { |e| e.category.income? }.sum(&:amount) %>
<% savings = entries.select { |e| e.category.savings? }.sum(&:amount) %>

<%= link_to calendar_week_path(date: day[:date].strftime("%Y-%m-%d")),
    class: "block rounded-md border border-gray-200 bg-white p-2 hover:border-gray-300 hover:shadow-sm transition-all #{muted_day_class(day[:in_month])}" do %>
  <span class="text-xs font-medium block text-center sm:text-left"><%= day[:date].day %></span>
  <div class="mt-0.5 flex flex-col items-center space-y-0.5">
    <% if expense > 0 %>
      <div class="text-xs leading-none text-status-danger font-medium"><%= compact_currency(expense) %></div>
    <% end %>
    <% if income > 0 %>
      <div class="text-xs leading-none text-status-success font-medium"><%= compact_currency(income) %></div>
    <% end %>
    <% if savings > 0 %>
      <div class="text-xs leading-none text-brand-dark font-medium"><%= compact_currency(savings) %></div>
    <% end %>
  </div>
<% end %>
