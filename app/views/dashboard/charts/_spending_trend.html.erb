<%# Spending Trend Chart %>
<div class="bg-white rounded shadow-sm p-6">
  <div class="flex items-center justify-between mb-6">
    <h3 class="font-semibold text-gray-900">Monthly Spending Trend</h3>
  </div>

  <div class="h-[250px]">
    <%
      # Get expense entries for the last 6 months
      expense_data = current_user.entries
        .joins(item: :category)
        .where(categories: { category_type: :expense })
        .where(date: 6.months.ago.beginning_of_month..Date.current.end_of_month)
        .group_by_month(:date)
        .sum(:amount)
    %>
    <%= line_chart expense_data,
        curve: false,
        points: false,
        colors: ["#C9C78B"],
        prefix: "$",
        thousands: ",",
        height: "250px",
        library: {
          legend: { display: false },
          scales: { y: { beginAtZero: true } }
        } %>
  </div>
</div> 